# 图的存储

图的结构比较复杂，任何两个顶点之间都可能有关系。

常用的图存储方法：

- 邻接矩阵
- 边集数组
- 邻接表/vector

## 邻接矩阵

邻接矩阵是表示顶点之间关系的矩阵。

邻接矩阵存储方法：

1. 一个一维数组存储图中顶点的信息；

2. 一个二维数组存储图中顶点之间的邻接关系。

存储顶点之间邻接关系的二维数组称为**邻接矩阵**。

在无向图中，如果$v_i$到$v_j$有边，则邻接矩阵`M[i][j] = M[j][i] = 1`，否则`M[i][j] = 0`。

![image-20220807161511426](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208071615479.png)

在有向图中，如果$v_i$到$v_j$有边，则邻接矩阵`M[i][j] = 1`，否则`M[i][j] = 0`。

![image-20220807161611912](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208071616959.png)

在带权图中，如果$v_i$到$v_j$有边，则邻接矩阵$M[i][j] = w_{ij}$，否则$M[i][j] = ∞$。

![image-20220807161929601](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208071619639.png)

**优点**：

- 快速判断两顶点之间是否有边。

- 方便计算各顶点的度。

**缺点：**

- 不便于增删顶点。

- 不便于访问所有邻接点。

- 空间复杂度高。

## 边集数组

边集数组表示法，通过数组存储每条边的起点和终点。如果是网，则增加一个权值域。

网的边集数组数据结构定义如下：

```c++
struct Edge{
    int u,v,w;
}e[N*N];
```

**优点：**

可以对边按权值排序。

方便对边进行处理。

**缺点：**

- 不便于判断两点之间是否有边。
- 不便于访问所有邻接点。
- 不便于计算各顶点的度。

## 邻接表

邻接表是图的一种链式存储方法。邻接表包含两部分：顶点和邻接点。

**顶点****：**包括顶点信息和指向第一个邻接点的指针。

**邻接点****：**包括邻接点的存储下标和指向下一个邻接点的指针。

顶点*v**i*的所有邻接点构成一个单链表。

无向图的邻接表

![image-20220813120640528](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208131206582.png)

有向图的邻接表

![image-20220813120705232](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208131207276.png)

邻接表的数据结构包括节点和邻接点，对其分别定义如下。

1. 节点。包括节点信息data和指向第1个邻接点的指针first。

![image-20220813120813427](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208131208466.png)

2. 邻接点。包括该邻接点的存储下标*v*和指向下一个邻接点的指针next，如果是网的邻接点，则还需增加一个权值域*w*。

![image-20220813120829052](https://victor-gx.oss-cn-beijing.aliyuncs.com/img/2022/DSA/202208131208082.png)

**优点：**

- 便于增删顶点。
- 便于访问所有邻接点。
- 空间复杂度低。

**缺点：**

- 不便于判断两顶点之间是否有边。
- 不便于计算各顶点的度。

虽然以邻接表访问单条边的效率不高，但是访问同一节点的所有关联边时，仅需访问该节点后面的单链表，时间复杂度为该节点的度$O(d(v_i))$；而以邻接矩阵访问同一节点的所有关联边时，时间复杂度为$O(n)$。总体上，邻接表比邻接矩阵效率更高。